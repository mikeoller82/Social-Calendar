const require_index = require('./sameThread/index.cjs');

//#region src/components/connect/strategies/index.ts
/**
* Creates a connection strategy based on the provided options.
*
* By default, uses SameThreadStrategy. When `isolateExecution: true` is
* specified and worker_threads is available, uses WorkerThreadStrategy instead.
*/
async function createStrategy(config, options) {
	if (options.isolateExecution) try {
		const { WorkerThreadStrategy } = await Promise.resolve().then(() => require("./workerThread/index.cjs"));
		return new WorkerThreadStrategy(config);
	} catch (err) {
		throw new Error("Failed to load worker thread strategy", { cause: err });
	}
	return new require_index.SameThreadStrategy(config);
}

//#endregion
exports.createStrategy = createStrategy;
//# sourceMappingURL=index.cjs.map