import { SameThreadStrategy } from "./sameThread/index.js";

//#region src/components/connect/strategies/index.ts
/**
* Creates a connection strategy based on the provided options.
*
* By default, uses SameThreadStrategy. When `isolateExecution: true` is
* specified and worker_threads is available, uses WorkerThreadStrategy instead.
*/
async function createStrategy(config, options) {
	if (options.isolateExecution) try {
		const { WorkerThreadStrategy } = await import("./workerThread/index.js");
		return new WorkerThreadStrategy(config);
	} catch (err) {
		throw new Error("Failed to load worker thread strategy", { cause: err });
	}
	return new SameThreadStrategy(config);
}

//#endregion
export { createStrategy };
//# sourceMappingURL=index.js.map